# Ensure /proc/config.gz is available
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y

# Disable unnecessary wireless modules
CONFIG_BT=n
CONFIG_CFG80211=n
CONFIG_NFC=n
CONFIG_WIRELESS=n

# Performance
CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE=y
CONFIG_DEBUG_KERNEL=n

# Required for Tailscale
CONFIG_TUN=y

# Rockchip platform support
CONFIG_ARCH_ROCKCHIP=y
CONFIG_ROCKCHIP_PHY=y
CONFIG_ROCKCHIP_THERMAL=y
CONFIG_ROCKCHIP_IOMMU=y
CONFIG_ROCKCHIP_IODOMAIN=y
CONFIG_ROCKCHIP_PM_DOMAINS=y
CONFIG_PWM_ROCKCHIP=y
CONFIG_NVMEM_ROCKCHIP_EFUSE=y
CONFIG_NVMEM_ROCKCHIP_OTP=y

# MMC/eMMC support
CONFIG_MMC_DW=y
CONFIG_MMC_DW_ROCKCHIP=y
CONFIG_MMC_SDHCI=y
CONFIG_MMC_SDHCI_OF_DWCMSHC=y

# Ethernet (GMAC)
CONFIG_STMMAC_ETH=y
CONFIG_STMMAC_PLATFORM=y
CONFIG_DWMAC_GENERIC=y
CONFIG_DWMAC_ROCKCHIP=y

# Network
CONFIG_NETFILTER=y
CONFIG_NF_CONNTRACK=y
CONFIG_NF_NAT=y
CONFIG_NETFILTER_XT_MATCH_CONNTRACK=y
CONFIG_IP_NF_IPTABLES=y
CONFIG_IP_NF_NAT=y
CONFIG_IP_NF_FILTER=y

# Required for GoKrazy
CONFIG_SQUASHFS=y
CONFIG_SQUASHFS_XZ=y
CONFIG_EXT4_FS=y
CONFIG_BLK_DEV_LOOP=y

# Console
CONFIG_CMDLINE="console=ttyS2,1500000"
